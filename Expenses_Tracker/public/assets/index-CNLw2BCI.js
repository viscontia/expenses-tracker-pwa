import{j as e,b as p,a as b,t as n,V as d,L as g,o as h,s as l}from"./index-DRQOx_Xf.js";import{u as f,a as w}from"./zod-CqYVsTtV.js";const y=h({email:l().email("Invalid email address"),password:l().min(6,"Password must be at least 6 characters"),confirmPassword:l().min(6,"Password must be at least 6 characters")}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function j(){const t=p(),{login:m}=b(),c=n.useContext(),a=n.auth.register.useMutation({onSuccess:s=>{m({...s.user,preferences:s.user.preferences},s.token),c.auth.getCurrentUser.invalidate(),t({to:"/dashboard"}),d.success("Account created successfully!")},onError:s=>{s.data?.code==="CONFLICT"?d.error("An account with this email already exists. Please try logging in instead."):d.error(s.message||"Registration failed.")}}),{register:o,handleSubmit:u,formState:{errors:r,isSubmitting:i}}=f({resolver:w(y)}),x=s=>{a.mutate({email:s.email,password:s.password})};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Create your account"}),e.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:["Or"," ",e.jsx(g,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:"sign in to your existing account"})]})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 py-8 px-4 shadow sm:rounded-lg sm:px-10",children:e.jsxs("form",{className:"space-y-6",onSubmit:u(x),children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email address"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"email",type:"email",autoComplete:"email",required:!0,...o("email"),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"})}),r.email&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:r.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"password",type:"password",autoComplete:"new-password",required:!0,...o("password"),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"})}),r.password&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:r.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirm Password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,...o("confirmPassword"),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"})}),r.confirmPassword&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:r.confirmPassword.message})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:i||a.isPending,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:i||a.isPending?"Creating account...":"Create account"})}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Quick Test Account"}),e.jsx("p",{className:"text-blue-700 dark:text-blue-300 mb-2",children:"Per testare l'app velocemente, puoi registrarti con:"}),e.jsxs("p",{className:"font-mono text-sm text-blue-600 dark:text-blue-400",children:["Email: test@example.com",e.jsx("br",{}),"Password: test123"]})]})})]})})})]})}const v=()=>e.jsx(j,{});export{v as component};
